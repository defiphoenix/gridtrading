{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ys/Documents/grid-trading/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ys/Documents/grid-trading/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ys/Documents/grid-trading/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import ApexCharts from\"apexcharts\";import{useEffect,useState}from\"react\";import ReactApexChart from\"react-apexcharts\";// import { ChartDraw } from \"./api\";\nimport ChartDraw from\"./api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var INITIAL_VALUES={random:{candle_date_time_kst:\"2018-04-18T19:16:00\",low_price:90,high_price:100,opening_price:0,trade_price:70}};function DateConvert(date){var tmp=new Date(date);var utc=tmp.getTime()+tmp.getTimezoneOffset()*60*1000;var KR_TIME_DIFF=9*60*60*1000;var kr_curr=new Date(utc+KR_TIME_DIFF);return kr_curr;}function ChartBox(){var initialValues=arguments.length>0&&arguments[0]!==undefined?arguments[0]:INITIAL_VALUES;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),loadingError=_useState4[0],setLoadingError=_useState4[1];var _useState5=useState([{initialValues:initialValues}]),_useState6=_slicedToArray(_useState5,2),dataTest=_useState6[0],setDataTest=_useState6[1];var data=[{time_close:\"2018-04-18T19:16:00\",open:8615000,high:8618000,low:8611000,close:8611000}];var asyncTest=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var options;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:options={method:\"GET\",headers:{Accept:\"application/json\"}};fetch(\"https://api.upbit.com/v1/candles/minutes/1?market=KRW-BTC&count=30\",options).then(function(response){return response.json();}).then(function(result){console.log(result);setDataTest(result);}).catch(function(err){return console.error(err);});console.log(dataTest);case 3:case\"end\":return _context.stop();}}},_callee);}));return function asyncTest(){return _ref.apply(this,arguments);};}();useEffect(function(){asyncTest();},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{width:550},children:[loadingError&&/*#__PURE__*/_jsx(\"p\",{children:loadingError.message}),/*#__PURE__*/_jsx(ReactApexChart,{type:\"candlestick\",options:{tooltip:{theme:\"dark\"},// theme: {\n//   mode: \"dark\",\n// },\nchart:{type:\"candlestick\",width:550},xaxis:{type:\"datetime\",categories:data===null||data===void 0?void 0:data.map(function(price){return DateConvert(price.candle_date_time_kst);})}},series:[{data:dataTest===null||dataTest===void 0?void 0:dataTest.map(function(price){return[// DateConvert(price.candle_date_time_kst),\nDate.parse(price.candle_date_time_kst),price.opening_price,price.high_price,price.low_price,price.trade_price];})}]})]});}export default ChartBox;","map":{"version":3,"names":["ApexCharts","useEffect","useState","ReactApexChart","ChartDraw","INITIAL_VALUES","random","candle_date_time_kst","low_price","high_price","opening_price","trade_price","DateConvert","date","tmp","Date","utc","getTime","getTimezoneOffset","KR_TIME_DIFF","kr_curr","ChartBox","initialValues","isLoading","setIsLoading","loadingError","setLoadingError","dataTest","setDataTest","data","time_close","open","high","low","close","asyncTest","options","method","headers","Accept","fetch","then","response","json","result","console","log","catch","err","error","width","message","tooltip","theme","chart","type","xaxis","categories","map","price","parse"],"sources":["/Users/ys/Documents/grid-trading/src/ChartBox.js"],"sourcesContent":["import ApexCharts from \"apexcharts\";\nimport { useEffect, useState } from \"react\";\nimport ReactApexChart from \"react-apexcharts\";\n// import { ChartDraw } from \"./api\";\nimport ChartDraw from \"./api\";\n\nconst INITIAL_VALUES = {\n  random: {\n    candle_date_time_kst: \"2018-04-18T19:16:00\",\n    low_price: 90,\n    high_price: 100,\n    opening_price: 0,\n    trade_price: 70,\n  },\n};\n\nfunction DateConvert(date) {\n  let tmp = new Date(date);\n  const utc = tmp.getTime() + tmp.getTimezoneOffset() * 60 * 1000;\n  const KR_TIME_DIFF = 9 * 60 * 60 * 1000;\n  const kr_curr = new Date(utc + KR_TIME_DIFF);\n  return kr_curr;\n}\n\nfunction ChartBox(initialValues = INITIAL_VALUES) {\n  const [isLoading, setIsLoading] = useState(false);\n  const [loadingError, setLoadingError] = useState(null);\n  const [dataTest, setDataTest] = useState([{ initialValues }]);\n  const data = [\n    {\n      time_close: \"2018-04-18T19:16:00\",\n      open: 8615000,\n      high: 8618000,\n      low: 8611000,\n      close: 8611000,\n    },\n  ];\n\n  const asyncTest = async () => {\n    const options = { method: \"GET\", headers: { Accept: \"application/json\" } };\n    fetch(\n      \"https://api.upbit.com/v1/candles/minutes/1?market=KRW-BTC&count=30\",\n      options\n    )\n      .then((response) => response.json())\n      .then((result) => {\n        console.log(result);\n        setDataTest(result);\n      })\n      .catch((err) => console.error(err));\n    console.log(dataTest);\n  };\n\n  useEffect(() => {\n    asyncTest();\n  }, []);\n\n  return (\n    <div style={{ width: 550 }}>\n      {loadingError && <p>{loadingError.message}</p>}\n      <ReactApexChart\n        type=\"candlestick\"\n        options={{\n          tooltip: {\n            theme: \"dark\",\n          },\n          // theme: {\n          //   mode: \"dark\",\n          // },\n          chart: { type: \"candlestick\", width: 550 },\n          xaxis: {\n            type: \"datetime\",\n            categories: data?.map((price) =>\n              DateConvert(price.candle_date_time_kst)\n            ),\n          },\n        }}\n        series={[\n          {\n            data: dataTest?.map((price) => {\n              return [\n                // DateConvert(price.candle_date_time_kst),\n                Date.parse(price.candle_date_time_kst),\n                price.opening_price,\n                price.high_price,\n                price.low_price,\n                price.trade_price,\n              ];\n            }),\n          },\n        ]}\n      />\n    </div>\n  );\n}\n\nexport default ChartBox;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}