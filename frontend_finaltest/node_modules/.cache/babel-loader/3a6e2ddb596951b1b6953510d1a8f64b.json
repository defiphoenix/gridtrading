{"ast":null,"code":"import _defineProperty from\"/Users/ys/Documents/grid-trading/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/ys/Documents/grid-trading/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/ys/Documents/grid-trading/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ys/Documents/grid-trading/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ys/Documents/grid-trading/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{Link}from\"react-router-dom\";import{startTrading}from\"./api\";import\"./LimitForm.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function sanitize(type,value){switch(type){case\"number\":return Number(value)||0;default:return value;}}var INITIAL_VALUES={accessKey:\"엑\",secretKey:\"secretkey\",lowerPrice:90,budget:100,gridNum:0,lower:0};function LimitForm(_ref){var _ref$initialValues=_ref.initialValues,initialValues=_ref$initialValues===void 0?INITIAL_VALUES:_ref$initialValues,onSubmit=_ref.onSubmit,onSubmitSuccess=_ref.onSubmitSuccess;var _useState=useState(initialValues),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),submittingError=_useState4[0],setSubmittingError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isSubmitting=_useState6[0],setIsSubmitting=_useState6[1];//   const [upperPrice, setUppePrice] = useState(\"100\");\n//   const [lowerPrice, setLowerPrice] = useState(\"90\");\n// const handleUpperPriceChange = (e) => setUppePrice(e.target.value);\nvar handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var formData,result,_result,food;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();formData=new FormData();formData.append(\"accessKey\",values.accessKey);formData.append(\"lowerPrice\",values.lowerPrice);formData.append(\"budget\",values.budget);formData.append(\"gridNum\",values.gridNum);_context.prev=6;setSubmittingError(null);setIsSubmitting(true);console.log(\"트라이구문\");_context.next=12;return onSubmit(formData);case 12:result=_context.sent;_context.next=19;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](6);setSubmittingError(_context.t0);return _context.abrupt(\"return\");case 19:_context.prev=19;setIsSubmitting(false);return _context.finish(19);case 22:_result=result,food=_result.food;setValues(initialValues);onSubmitSuccess(food);case 25:case\"end\":return _context.stop();}}},_callee,null,[[6,15,19,22]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();var handleChange=function handleChange(name,value){setValues(function(prevValues){return _objectSpread(_objectSpread({},prevValues),{},_defineProperty({},name,value));});};var handleInputChange=function handleInputChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value,type=_e$target.type;handleChange(name,sanitize(type,value));};return/*#__PURE__*/_jsx(\"form\",{className:\"LimitForm\",onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"LimitForm-columns\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"LimitForm-rows\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"accessKey\",children:\"accessKey\"}),/*#__PURE__*/_jsx(\"input\",{className:\"LimitForm-accessKey\",id:\"accessKey\",name:\"accessKey\",value:values.accessKey,placeholder:\"accessKey\",onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"LimitForm-rows\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"secretKey\",children:\"secretKey\"}),/*#__PURE__*/_jsx(\"input\",{className:\"LimitForm-secretKey\",id:\"secretKey\",name:\"secretKey\",value:values.secretKey,placeholder:\"secretKey\",onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"LimitForm-rows\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lowerPrice\",children:\"Stoploss (\\uD558\\uD55C)\"}),/*#__PURE__*/_jsx(\"input\",{className:\"LimitForm-lower\",id:\"lowerPrice\",name:\"lowerPrice\",value:values.lowerPrice,placeholder:\"\\uD558\\uD55C\",onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"LimitForm-rows\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lowerPrice\",children:\"Budget (\\uC608\\uC0B0) \"}),/*#__PURE__*/_jsx(\"input\",{className:\"LimitForm-budget\",id:\"budget\",name:\"budget\",value:values.budget,placeholder:\"\\uC608\\uC0B0\",onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"LimitForm-rows\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"gridNum\",children:\"Grid Number \"}),/*#__PURE__*/_jsx(\"input\",{className:\"LimitForm-budget\",id:\"gridNum\",name:\"gridNum\",value:values.gridNum,placeholder:\"\\uADF8\\uB9AC\\uB4DC \\uC218\",onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"LimitForm-rows\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lower\",children:\"lower \"}),/*#__PURE__*/_jsx(\"input\",{className:\"LimitForm-lower\",id:\"lower\",name:\"lower\",value:values.lower,placeholder:\"lower\",onChange:handleInputChange})]}),/*#__PURE__*/_jsx(Link,{to:\"/results\",children:/*#__PURE__*/_jsx(\"button\",{className:\"LimitForm-submit-button\",type:\"submit\",disabled:isSubmitting,onClick:startTrading,children:\"\\uD14C\\uC2A4\\uD2B8 \\uD655\\uC778\"})}),submittingError&&/*#__PURE__*/_jsx(\"p\",{children:submittingError.message})]})});}export default LimitForm;","map":{"version":3,"names":["useState","Link","startTrading","sanitize","type","value","Number","INITIAL_VALUES","accessKey","secretKey","lowerPrice","budget","gridNum","lower","LimitForm","initialValues","onSubmit","onSubmitSuccess","values","setValues","submittingError","setSubmittingError","isSubmitting","setIsSubmitting","handleSubmit","e","preventDefault","formData","FormData","append","console","log","result","food","handleChange","name","prevValues","handleInputChange","target","message"],"sources":["/Users/ys/Documents/grid-trading/src/LimitForm.js"],"sourcesContent":["import { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { startTrading } from \"./api\";\nimport \"./LimitForm.css\";\n\nfunction sanitize(type, value) {\n  switch (type) {\n    case \"number\":\n      return Number(value) || 0;\n\n    default:\n      return value;\n  }\n}\n\nconst INITIAL_VALUES = {\n  accessKey: \"엑\",\n  secretKey: \"secretkey\",\n  lowerPrice: 90,\n  budget: 100,\n  gridNum: 0,\n  lower: 0,\n};\n\nfunction LimitForm({\n  initialValues = INITIAL_VALUES,\n  onSubmit,\n  onSubmitSuccess,\n}) {\n  const [values, setValues] = useState(initialValues);\n  const [submittingError, setSubmittingError] = useState(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  //   const [upperPrice, setUppePrice] = useState(\"100\");\n  //   const [lowerPrice, setLowerPrice] = useState(\"90\");\n  // const handleUpperPriceChange = (e) => setUppePrice(e.target.value);\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"accessKey\", values.accessKey);\n    formData.append(\"lowerPrice\", values.lowerPrice);\n    formData.append(\"budget\", values.budget);\n    formData.append(\"gridNum\", values.gridNum);\n    let result;\n    try {\n      setSubmittingError(null);\n      setIsSubmitting(true);\n      console.log(\"트라이구문\");\n      result = await onSubmit(formData);\n    } catch (error) {\n      setSubmittingError(error);\n      return;\n    } finally {\n      setIsSubmitting(false);\n    }\n    const { food } = result;\n    setValues(initialValues);\n    onSubmitSuccess(food);\n  };\n\n  const handleChange = (name, value) => {\n    setValues((prevValues) => ({\n      ...prevValues,\n      [name]: value,\n    }));\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value, type } = e.target;\n    handleChange(name, sanitize(type, value));\n  };\n\n  return (\n    <form className=\"LimitForm\" onSubmit={handleSubmit}>\n      <div className=\"LimitForm-columns\">\n        <div className=\"LimitForm-rows\">\n          <label htmlFor=\"accessKey\">accessKey</label>\n          <input\n            className=\"LimitForm-accessKey\"\n            id=\"accessKey\"\n            name=\"accessKey\"\n            value={values.accessKey}\n            placeholder=\"accessKey\"\n            onChange={handleInputChange}\n          />\n        </div>\n        <div className=\"LimitForm-rows\">\n          <label htmlFor=\"secretKey\">secretKey</label>\n          <input\n            className=\"LimitForm-secretKey\"\n            id=\"secretKey\"\n            name=\"secretKey\"\n            value={values.secretKey}\n            placeholder=\"secretKey\"\n            onChange={handleInputChange}\n          />\n        </div>\n        <div className=\"LimitForm-rows\">\n          <label htmlFor=\"lowerPrice\">Stoploss (하한)</label>\n          <input\n            className=\"LimitForm-lower\"\n            id=\"lowerPrice\"\n            name=\"lowerPrice\"\n            value={values.lowerPrice}\n            placeholder=\"하한\"\n            onChange={handleInputChange}\n          />\n        </div>\n        <div className=\"LimitForm-rows\">\n          <label htmlFor=\"lowerPrice\">Budget (예산) </label>\n          <input\n            className=\"LimitForm-budget\"\n            id=\"budget\"\n            name=\"budget\"\n            value={values.budget}\n            placeholder=\"예산\"\n            onChange={handleInputChange}\n          />\n        </div>\n        <div className=\"LimitForm-rows\">\n          <label htmlFor=\"gridNum\">Grid Number </label>\n          <input\n            className=\"LimitForm-budget\"\n            id=\"gridNum\"\n            name=\"gridNum\"\n            value={values.gridNum}\n            placeholder=\"그리드 수\"\n            onChange={handleInputChange}\n          />\n        </div>\n        <div className=\"LimitForm-rows\">\n          <label htmlFor=\"lower\">lower </label>\n          <input\n            className=\"LimitForm-lower\"\n            id=\"lower\"\n            name=\"lower\"\n            value={values.lower}\n            placeholder=\"lower\"\n            onChange={handleInputChange}\n          />\n        </div>\n        <Link to=\"/results\">\n          <button\n            className=\"LimitForm-submit-button\"\n            type=\"submit\"\n            disabled={isSubmitting}\n            onClick={startTrading}\n          >\n            테스트 확인\n          </button>\n        </Link>\n        {submittingError && <p>{submittingError.message}</p>}\n      </div>\n    </form>\n  );\n}\n\nexport default LimitForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}